<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">High level design | We do takeaway</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="High level design | We do takeaway"><meta data-react-helmet="true" name="description" content="The purpose of this document is to give a high level overview of the technical architecture used to build and host the &quot;We Do Takeaway&quot; (WDT) service."><meta data-react-helmet="true" property="og:description" content="The purpose of this document is to give a high level overview of the technical architecture used to build and host the &quot;We Do Takeaway&quot; (WDT) service."><meta data-react-helmet="true" property="og:url" content="https://we-do-takeaway.github.io/docs/hld"><link data-react-helmet="true" rel="shortcut icon" href="/img/logo.jpg"><link data-react-helmet="true" rel="canonical" href="https://we-do-takeaway.github.io/docs/hld"><link rel="stylesheet" href="/styles.fe77e6c3.css">
<link rel="preload" href="/styles.7d4644ac.js" as="script">
<link rel="preload" href="/runtime~main.a1496a87.js" as="script">
<link rel="preload" href="/main.4f4c11ce.js" as="script">
<link rel="preload" href="/common.200222a6.js" as="script">
<link rel="preload" href="/10.dfeda782.js" as="script">
<link rel="preload" href="/11.5f6fcf38.js" as="script">
<link rel="preload" href="/935f2afb.2ad5c319.js" as="script">
<link rel="preload" href="/17896441.323aee2a.js" as="script">
<link rel="preload" href="/79e21d61.8a7243e9.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.jpg" alt="Takeaway logo"><strong class="navbar__title">We do takeaway</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/We-Do-Takeaway" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.jpg" alt="Takeaway logo"><strong class="navbar__title">We do takeaway</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/We-Do-Takeaway" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">High level design</h1></header><div class="markdown"><p>The purpose of this document is to give a high level overview of the technical architecture used to build and host the &quot;We Do Takeaway&quot; (WDT) service.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="service-description"></a>Service description<a aria-hidden="true" tabindex="-1" class="hash-link" href="#service-description" title="Direct link to heading">#</a></h2><p>We Do Takeaway is a FOSS platform that can allow restaurants to offer online ordering to their customers and manage and track the fulfillment and delivery of their food.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="considerations"></a>Considerations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#considerations" title="Direct link to heading">#</a></h2><p>The purpose of WDT is not only to build a piece of software that may be genuinely useful but also is a a learning exercise in building a GraphQL and Kubernetes based service as well as experimenting with development tools and planning processes. The service elements will form the basis of blog articles and tutorials. This aim fuels the what may appear at first glance of a dumb decision to build the platform with such a wide variety of frameworks. By mixing and matching these frameworks it will allow tools such as .NET Core, Java, Javascript and Go to be compared. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="technical-requirements"></a>Technical Requirements<a aria-hidden="true" tabindex="-1" class="hash-link" href="#technical-requirements" title="Direct link to heading">#</a></h2><p>The WDT service allows users to access it using a variety of clients and technologies. The user should be free to use whatever method they wish that is most convenient to them, be it an iPhone, browser, android device or whatever. In some situations bandwidth may be plenty via desktops with broadband, but in others it will be severely limited via patchy 3G wireless access using small screen mobile devices.</p><p>When choosing server tools to use the following must be taken into account:</p><ul><li>Documentation</li><li>Reliability</li><li>Scalability (ease and economy)</li><li>Testing tools</li><li>Ease of maintenance</li><li>Vendor backing (Can 1 person leaving the project break it?)</li><li>Code quality</li></ul><p>The service must be able to scale economically from very small workloads of one or 2 users all the way up to a shared service with 1000&#x27;s of simultaneous API requests. The service must be something that an individual business itself could deploy, with some help, or form the service layer of a company offering it to multiple restaurants. It may also be used by franchises.</p><p>Deployment of server elements must be possible with a single machine and docker-compose but also be fully supported in a Kubernetes cluster, either privately built of via a PAAS such as AWS or Azure.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="approach"></a>Approach<a aria-hidden="true" tabindex="-1" class="hash-link" href="#approach" title="Direct link to heading">#</a></h2><p><img alt="Application Components" src="/assets/images/components-12f2ed1f06b9ca4d8a4f026ba949cfc7.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="servers"></a>Servers<a aria-hidden="true" tabindex="-1" class="hash-link" href="#servers" title="Direct link to heading">#</a></h3><p>The service architectures takes the approach of creating a collection of GraphQL API servers, each one responsible for a defined domain, these include:</p><ul><li>Customer</li><li>Menu</li><li>Order</li><li>Payment</li><li>Restaurant</li><li>Delivery person</li><li>Delivery tracking</li><li>Service owner</li><li>Authentication</li></ul><p><img alt="Services" src="/assets/images/servers-3a059a1ac0da1b7f62d1e04920cf6b41.png"></p><p>Domains are related to each other. One example is the case of an order, there are attributes that are unique to the order itself but it also relates to other information including the customer, restaurant, menu items, delivery details.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="graphql-schema-stitching"></a>GraphQL schema stitching<a aria-hidden="true" tabindex="-1" class="hash-link" href="#graphql-schema-stitching" title="Direct link to heading">#</a></h4><p><img alt="Schema stitching" src="/assets/images/schemastitching-5b6a049721f70f5d90cccaaede04a045.png"></p><p>An API Gateway layer combines the multiple GraphQL back-ends into a single API, stitching the different parts of data together. This means that when a query is sent to get the order details including the customer etc it fetches some information from the order server and uses properties in that to go and fetch the customer data from the customer server. All this is transparent to the client.</p><p><img alt="Combine data" src="/assets/images/fetching-9202195a56c08d7026ac439a0484746f.png"></p><p>An alternative to this stitching approach is Federation, though at this time not all GraphQL servers support it and stitching can still provide the functionality required.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="clients"></a>Clients<a aria-hidden="true" tabindex="-1" class="hash-link" href="#clients" title="Direct link to heading">#</a></h3><p>Eventually a wide range of clients will be required. Within the initial phase of the projects the following will be focussed on:</p><ul><li>Browser based menu browsing and ordering (React JS)</li><li>Browser based management of orders (Blazor WASM)</li><li>Delivery driver app (Android)</li><li>Central admin (HQ) tool (iOS/Mac OS)</li></ul><p>Over time new clients will be developed including:</p><ul><li>Menu browsing and ordering via iPhone/iPad and Android</li><li>Delivery driver app on iOS</li><li>Apple watch and Apple TV support</li><li>Combined Mac/iOS support for Apple silicon</li><li>Restaurant mobile management app for iPhone/iPad</li></ul><p>The server based API should make it possible for any new client to be developed as long as it has support for GraphQL. When building the server API&#x27;s they must contain any business logic so that new clients do not need to repeat code, though this may become interesting when a piece of logic spans multiple domains and the API Gateway may need to encompass that, acting as a service layer instead of simple dividing tasks.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/We-Do-Takeaway/docs-and-architecture/edit/master/website/docs/hld.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#service-description" class="table-of-contents__link">Service description</a></li><li><a href="#considerations" class="table-of-contents__link">Considerations</a></li><li><a href="#technical-requirements" class="table-of-contents__link">Technical Requirements</a></li><li><a href="#approach" class="table-of-contents__link">Approach</a><ul><li><a href="#servers" class="table-of-contents__link">Servers</a></li><li><a href="#clients" class="table-of-contents__link">Clients</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/wedotakeaway" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://twitter.com/wedotakeaway" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/We-Do-Takeaway" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 We do takeaway. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.7d4644ac.js"></script>
<script src="/runtime~main.a1496a87.js"></script>
<script src="/main.4f4c11ce.js"></script>
<script src="/common.200222a6.js"></script>
<script src="/10.dfeda782.js"></script>
<script src="/11.5f6fcf38.js"></script>
<script src="/935f2afb.2ad5c319.js"></script>
<script src="/17896441.323aee2a.js"></script>
<script src="/79e21d61.8a7243e9.js"></script>
</body>
</html>